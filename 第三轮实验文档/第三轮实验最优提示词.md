POSITIVE_EXAMPLE="""
        原始转录片段：
            说话人2
            当时您就继续在数学系。
            说话人1
            第一那个时候还没计算机对吧？所以毕业就留在数学去了，而且我留下来因为去搞概率统计的。
            说话人2
            嗯嗯当时概率统计是您自己对这个方向有兴趣，还是说不知道？
            说话人1
            还应该过去过去在五六年应该好像搞了一个科学发展规划上，五六年国家制定这么一个规划，搞这个规划的话，当时好像当时我们反正确实也不太一样，我还听说好像他们到北京开会的时候说就但是对他是跟苏联关系也比较好，所以定规划的时候就苏联专家也来参加。
            说话人1
            当时他们好像认为在数学领域，我们听到了这个就是说好像就是说我们现在的对当时的中国的数学好像就有点陈旧的东西，好像。
            说话人1
            有一些好像国外很重要的数学分支没有得到好像应该没有。
            说话人2
            得到好像没有很好的解释。
            说话人1
            对，因为过去比如说那么过去一些老专家，他们因为都是也从外面回来，所以所以艺术团就是要对某些数学重要的学科要加强。这里面大概提到三样东西，一个就是计算机或者计算数学，那可以管这一套就跟计算机有关的一套、数学。另外一个就是说微用方程。还有一个就是说概率统计，就好像说三这三个东西，在当时国外至少或者说苏联专家或者制定规划的那些做大大专家们认为好像这个东西还是当时在数学应该是比较重要的，应该还是国内要
            说话人1
            还有这方面相对也比较弱，要加强这方面。
            说话人1
            所以在我们回来以后好像大概那个时候扩大数学系，也加强这方面国家都采取措施了，好像跟教研组也是也是在这个时候成立的，应该给了。
        优秀的口述史写法：
            “我毕业那会儿，还没有计算机呢，所以毕业就留在数学系了。我留下来搞概率统计，这个选择啊，跟当时国家的一个大规划有关系。
            大概是1956年吧，国家搞了一个科学发展规划。那时候我们和苏联关系好，制定规划的时候还有苏联专家来参加。我听说去北京开会的人回来说，专家们觉得我们中国的数学有点'陈旧'，国外一些重要的数学分支，我们这里要么没有，要么发展得不好。
            那些从国外回来的老专家也觉得是这样。所以规划里就定了，要重点加强几个数学学科：一个是计算数学（就是跟计算机有关的数学），一个是微分方程，还有一个是概率统计。这些领域当时在国外挺受重视的，但我们国内比较弱，所以要加紧发展。
            按照这个规划，我们数学系后来就扩大了，国家也给了支持，概率统计教研组就是那时候成立的。我留在数学系搞概率统计，也是跟着这个趋势走——既是国家需要，也是学科发展的好时机。"
        其优点：保留了老人朴实自然的语言风格，将口语整理为通顺的叙述，内容真实，并体现了时代背景。"""
        
# 改进的提示词模板定义
IMPROVED_PROMPT = """

请你扮演一位富有经验的传记作家和历史学者，专门从事口述史的整理与撰写。你的任务是根据一段老年人的采访转录文本，生成一篇真挚、真实、生动、结构清晰的老年人口述史。

首先，请基于以下指导原则，深度理解你将要去执行的“口述史生成”任务。
1. 任务定义：口述史是一种基于个人亲历的叙事文体。它不是简单的问答记录，而是将口语化的、可能零散的回忆，提炼、整合、重组为一条清晰的叙事线。它需要：
    （1）时间脉络：以时间顺序为骨架，勾勒出人生的主要阶段。
    （2）主题聚焦：突出{theme_focus}
    （3）情感与细节：保留受访者独特的语言风格、情感表达和关键的原话与细节，使其人物形象丰满。
    （4）叙事性：语言应平实流畅，富有故事性，读起来像一篇连贯的个人传记。
    （5）语言风格：保持老人朴实自然的语言风格，避免过度书面化。可以适当使用老人常用的口语词汇。

2. 需避免的事项（非常重要！）：
    （1）禁止虚构：绝不能添加或捏造任何采访中未提及的事实。
    （2）禁止罗列：避免以“他说……然后他说……”这种机械的方式拼接文本。
    （3）风格不当：避免使用过于书面化、学术化或官方报告式的语言。同时也要避免过于网络化的用语。
    （4）遗漏重点：不得忽略{key_events}的描述。

3. 正面示例:
{positive_example}

现在，请针对以下提供的采访转录文本，参考示例以及“任务定义”和“需避免的事项”中的所有要求，按照思维链步骤分析和改写口述内容，确保保留所有重要细节：

第一步：详细提取时间线和关键事件
识别所有时间线索和具体事件
建立完整的时间顺序
标记每个重要事件的具体细节

第二步：分析人物关系和互动
识别所有提到的人物及其关系
记录人物之间的具体互动和对话
分析人物情感变化

第三步：梳理事件逻辑和因果关系
提取所有主要和次要事件
分析事件之间的因果关系
保留事件的具体情境和背景

第四步：理解情感基调和细节
分析原始情感表达的细微差别
保持情感真实性，不美化负面情绪
保留情感表达的具体触发点

第五步：基于以上详细分析进行改写，确保：
保留原文的具体细节
字数不少于原文的20%
维持原文的个人化表达风格
在最终成文时，特别注意：
保持老人朴实自然的语言风格
适当使用口语词汇增强真实感
确保语言连贯、情感真挚、叙事生动

重要要求：
保持原文的所有重要细节和具体内容，不要过度概括
保留原文的情感和个人化表达
保持老人朴实自然的语言风格，可以适当保留老人常用的口语词汇和表达习惯，可以适当使用"那时候"、"那会儿"、"记得"等老人常用的口语词汇。
确保叙事连贯、情感真挚、生动有趣
字数不少于原文的20%
按照时间顺序和主题进行组织，但不要丢失具体事例

采访转录文本：
{oral_text}

【最终输出格式】

请将你的最终思考过程和成果，按以下清晰的结构呈现给我：

【步骤一：信息梳理结果】
- 时间线和关键事件：
- 人物关系和互动：
- 事件逻辑和因果关系：
- 情感基调和细节：

【步骤二：文章大纲】

【步骤三：生成的口述史正文】
（在这里输出完整的口述史文章）

"""